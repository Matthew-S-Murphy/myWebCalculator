<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>myWebCalculator</title>
  <style>
    :root { font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    body { display:flex; min-height:100vh; align-items:center; justify-content:center; background:#111; color:#f5f5f5; }
    .calc { width:320px; background:#1c1c1c; border-radius:12px; padding:16px; box-shadow:0 12px 30px rgba(0,0,0,.5); }
    .display { background:#000; color:#0f0; font-size:28px; text-align:right; padding:12px; border-radius:8px; overflow-x:auto; }
    .keys { display:grid; grid-template-columns: repeat(4,1fr); gap:10px; margin-top:12px; }
    button { padding:14px 10px; font-size:18px; border:none; border-radius:8px; background:#2b2b2b; color:#fff; cursor:pointer; }
    button.op { background:#3b3b3b; }
    button.eq { background:#7a00ff; }
    button.cl { background:#6b0000; }
    button:active { transform: translateY(1px); }
    footer { margin-top:10px; font-size:12px; opacity:.7; text-align:center;}
  </style>
</head>
<body>
  <div class="calc">
    <div class="display" id="display">0</div>
    <div class="keys">
      <button class="cl" data-action="clear">AC</button>
      <button class="op" data-action="sign">±</button>
      <button class="op" data-action="percent">%</button>
      <button class="op" data-action="op" data-value="/">÷</button>

      <button data-action="digit" data-value="7">7</button>
      <button data-action="digit" data-value="8">8</button>
      <button data-action="digit" data-value="9">9</button>
      <button class="op" data-action="op" data-value="*">×</button>

      <button data-action="digit" data-value="4">4</button>
      <button data-action="digit" data-value="5">5</button>
      <button data-action="digit" data-value="6">6</button>
      <button class="op" data-action="op" data-value="-">−</button>

      <button data-action="digit" data-value="1">1</button>
      <button data-action="digit" data-value="2">2</button>
      <button data-action="digit" data-value="3">3</button>
      <button class="op" data-action="op" data-value="+">+</button>

      <button data-action="digit" data-value="0" style="grid-column: span 2;">0</button>
      <button data-action="dot">.</button>
      <button class="eq" data-action="equals">=</button>
    </div>
    <footer>© You, glorious number sorcerer.</footer>
  </div>

  <script>
    const display = document.getElementById('display');
    let buffer = '0';
    let prev = null;
    let op = null;
    let justEvaluated = false;

    function setDisplay(v){ display.textContent = v; }
    function inputDigit(d) {
      if (justEvaluated) { buffer = '0'; justEvaluated = false; }
      if (buffer === '0') buffer = d;
      else buffer += d;
      setDisplay(buffer);
    }
    function inputDot() {
      if (justEvaluated) { buffer = '0'; justEvaluated = false; }
      if (!buffer.includes('.')) buffer += '.';
      setDisplay(buffer);
    }
    function clearAll() { buffer = '0'; prev = null; op = null; setDisplay(buffer); }
    function setOp(nextOp) {
      if (op && prev !== null && !justEvaluated) evaluate();
      prev = parseFloat(buffer);
      op = nextOp;
      buffer = '0';
      justEvaluated = false;
    }
    function percent() {
      buffer = (parseFloat(buffer) / 100).toString();
      setDisplay(buffer);
    }
    function sign() {
      buffer = (parseFloat(buffer) * -1).toString();
      setDisplay(buffer);
    }
    function evaluate() {
      const a = prev;
      const b = parseFloat(buffer);
      if (a === null || op === null) return;
      let result = 0;
      switch(op) {
        case '+': result = a + b; break;
        case '-': result = a - b; break;
        case '*': result = a * b; break;
        case '/': result = b === 0 ? '∞' : a / b; break;
      }
      buffer = String(result);
      prev = null; op = null; justEvaluated = true;
      setDisplay(buffer);
    }

    document.querySelector('.keys').addEventListener('click', e => {
      const btn = e.target.closest('button'); if (!btn) return;
      const action = btn.dataset.action;
      if (action === 'digit') inputDigit(btn.dataset.value);
      else if (action === 'dot') inputDot();
      else if (action === 'clear') clearAll();
      else if (action === 'percent') percent();
      else if (action === 'sign') sign();
      else if (action === 'op') setOp(btn.dataset.value);
      else if (action === 'equals') evaluate();
    });

    // Keyboard support, because we are civilized.
    window.addEventListener('keydown', (e) => {
      if (/\d/.test(e.key)) inputDigit(e.key);
      else if (e.key === '.') inputDot();
      else if (['+','-','*','/'].includes(e.key)) setOp(e.key);
      else if (e.key === 'Enter' || e.key === '=') evaluate();
      else if (e.key === 'Escape') clearAll();
    });
  </script>
</body>
</html>
